<analysis>**original_problem_statement:**
O usuário está desenvolvendo um **SIGESC (Sistema Integrado de Gestão Escolar)**, um projeto full-stack (React/FastAPI/MongoDB). O trabalho recente focou-se em:

1.  **[CONCLUÍDO]** Implementação da página **Objetos de Conhecimento**.
2.  **[CONCLUÍDO]** Várias melhorias de UI/UX, incluindo a substituição do botão Voltar ao Dashboard por um ícone Home e texto Início posicionado à esquerda do título da página.
3.  **[CONCLUÍDO]** Habilitação do acesso do professor ao seu diário (Frequência, Notas, Objetos de Conhecimento), corrigindo um bug onde as turmas/escolas alocadas não eram carregadas corretamente.
4.  **[CONCLUÍDO]** Aprimoramento do Dashboard do Administrador para se assemelhar ao do professor, com uma barra de identificação e foto.
5.  **[EM ANDAMENTO]** Criação e aprimoramento de uma página de **Perfil de Usuário** no estilo do LinkedIn, com as seguintes funcionalidades:
    *   Campos para foto de perfil e de capa.
    *   Links para redes sociais (Website, LinkedIn, Facebook, Instagram, WhatsApp).
    *   Formatação do número de telefone.
    *   Uma barra de busca para encontrar outros perfis públicos no sistema.

**User's preferred language**: Portuguese (Português)

**what currently exists?**
Uma aplicação full-stack (React/FastAPI/MongoDB) funcional com autenticação JWT e RBAC (Role-Based Access Control). A maioria dos módulos principais (Gestão de Escolas, Usuários, Alunos, Professores, etc.) está implementada.

Recentemente, foram concluídas:
*   A funcionalidade completa de Objetos de Conhecimento.
*   Correções de bugs e melhorias de UI, incluindo o acesso restrito do professor aos seus próprios dados e a padronização dos cabeçalhos das páginas.
*   A primeira versão da página de Perfil do Usuário foi criada.
*   O Dashboard do Administrador foi redesenhado.

O trabalho atual foca-se na última solicitação do usuário: aprimorar a página de Perfil do Usuário. O backend foi atualizado com novos campos no modelo e um endpoint de busca. O frontend () foi reescrito para incluir os novos elementos de UI: busca de perfis, placeholders para upload de imagens, links de redes sociais e formatação de telefone.

**Last working item**:
- **Last item agent was working:** O agente estava finalizando a implementação das melhorias na página de Perfil do Usuário. Ele atualizou os modelos e endpoints do backend e reescreveu a página de frontend () para incluir uma barra de busca, placeholders para upload de fotos, mais links de redes sociais e formatação de telefone.
- **Status:** USER VERIFICATION PENDING
- **Agent Testing Done:** N (Apenas verificação visual via screenshot foi realizada. A funcionalidade de busca e upload não foi testada.)
- **Which testing method agent to use?** both
- **User Testing Done:** N

**All Pending/In progress Issue list**:
Nenhum problema pendente.

**In progress Task List**:
- **Task 1: Testar e Finalizar as Melhorias da Página de Perfil (P0)**
    - **Where to resume:** A UI e o backend básicos estão prontos. É necessário testar exaustivamente as novas funcionalidades.
    - **What will be achieved with this?** Garantir que a busca de perfis, o upload de imagens (backend precisa ser implementado) e a edição de novos campos funcionem corretamente.
    - **Status:** IN PROGRESS
    - **Should Test frontend/backend/both after fix?** both
    - **Blocked on something:** A funcionalidade de upload de fotos de perfil e capa está bloqueada, pois o backend para receber e armazenar os arquivos ainda não foi implementado.

**Upcoming and Future Tasks**
- **Upcoming Tasks:**
    - **P0: Implementar o backend para upload de imagens:** Criar os endpoints e a lógica para lidar com o upload da foto de perfil e da foto de capa na página de Perfil do Usuário.
    - **P1: Refatorar :** O arquivo  tem mais de 2.100 linhas e precisa ser dividido em componentes menores para melhorar a manutenibilidade.
- **Future Tasks:**
    - **P2: FASE 7 - Sistema de Comunicação:** CRUD de Avisos.
    - **P3: FASE 8 - Geração de Documentos:** Funcionalidade para gerar PDFs (Boletim, Declarações).
    - **P4: Refatorar  e **.

**Completed work in this session**
- **Funcionalidade Objetos de Conhecimento**: Implementada e testada de ponta a ponta.
- **Melhorias de Acesso do Professor**: Corrigido o bug que impedia professores de verem suas turmas e escolas. Rotas ,  e  foram habilitadas e agora carregam os dados corretamente.
- **Padronização da UI**: O botão Voltar ao Dashboard foi substituído em mais de 10 páginas por um novo cabeçalho com o botão Início e ícone da Home, posicionado à esquerda do título da página.
- **Página de Perfil do Usuário (Versão 2)**:
    - Criada a página no estilo LinkedIn ().
    - Backend foi estendido para incluir mais redes sociais, campos para URLs de imagens e um endpoint de busca ().
    - Frontend foi aprimorado com uma barra de busca, placeholders para upload de imagens e formatação de telefone.
- **Redesign do Dashboard do Administrador**: A página  foi redesenhada para ter um layout similar ao do professor, com uma barra de identificação azul, foto e links de acesso rápido.
- **Correção de Bug no Nome do Perfil**: Corrigido um problema onde o nome do usuário não aparecia no perfil, ajustando o backend para buscar o  diretamente do banco de dados em vez de depender do token JWT.

**Earlier issues found/mentioned but not fixed**
- **Issue 1: Refatoração do **: O arquivo  é excessivamente grande (2.100+ linhas) e complexo, dificultando a manutenção.
- **Issue 2: Refatoração do **: O arquivo também é muito grande e precisa ser refatorado.
- **Issue 3: Refatoração do **: Pode ser dividido em componentes menores.

**Known issue recurrence from previous fork**
- None.

**Code Architecture**


**Key Technical Concepts**
- **Data Fetching Condicional por Role**: Uso do hook  para verificar o  do usuário e chamar a API apropriada (ex:  para professores,  para admins).
- **Backend Search Endpoint**: Criação de um endpoint () que utiliza expressões regulares () no MongoDB para busca textual case-insensitive.
- **State Derivation no Frontend**: Uso de  e  para filtrar e derivar listas (escolas, turmas, componentes) com base nas seleções do usuário.
- **Refatoração de UI**: Alteração em massa de mais de 10 componentes para padronizar o layout do cabeçalho da página.

**key DB schema**
- **user_profiles:** 

**changes in tech stack**
- None.

**All files of reference**
- **Criados:**
    - : Página de perfil do usuário.
- **Modificados (significativamente):**
    - : Adicionados e expandidos os modelos .
    - : Adicionados os endpoints CRUD e de busca para os perfis de usuário.
    - : Adicionada a  com as novas chamadas.
    - : Adicionadas as rotas para a página de perfil.
    - : Redesign completo para se assemelhar ao dashboard do professor.
    - , , : Modificados para carregar dados específicos do professor.
    - Mais de 10 outros arquivos de página (ex: , , ) foram atualizados para o novo layout do cabeçalho.

**Areas that need refactoring**:
-  (Crítico)
- 

**key api endpoints**
- **GET /api/profiles/search**: (NOVO) Busca perfis públicos por nome.
- **GET /api/profiles/{user_id}**: (NOVO) Obtém um perfil de usuário específico.
- **PUT /api/profiles/me**: (NOVO) Atualiza o perfil do usuário logado.
- **GET /api/professor/turmas**: Endpoint crucial usado para carregar os dados corretos para o perfil de professor.

**Critical Info for New Agent**
- **Upload de Imagens Incompleto**: A UI para upload de fotos de perfil e capa foi criada no frontend, mas **não há implementação no backend** para processar esses uploads. Esta é a próxima etapa bloqueante para a tarefa do perfil.
- **Lógica de Roles**: A aplicação distingue fortemente os papéis dos usuários (, , ). Sempre verifique o  do usuário com  antes de carregar dados para garantir que a API correta seja chamada.
- **Refatoração Urgente**: O arquivo  é um débito técnico significativo. Planeje sua refatoração após concluir a tarefa atual.

**documents created in this job**
- None.

**Last 10 User Messages and any pending user messages**
1.  **user:** Pede para ajustar o layout do botão Início, reorganizar o dashboard do professor e criar a página de perfil. -> **IN PROGRESS**
2.  **user:** Solicita aprimoramento do dashboard do administrador para ter um layout semelhante ao do professor. -> **COMPLETED**
3.  **user:** Ok. -> **COMPLETED**
4.  **user:** Vamos melhorar a estrutura do perfil... (pede busca de perfis, mais redes sociais, etc.). -> **IN PROGRESS** (Última tarefa em andamento)
5.  **user:** Acesse como professora Ricleide e não carregou as escolas... -> **COMPLETED**
6.  **user:** Ok. Vamos fazer alguns pequenos ajustes... (pede posicionamento do botão 'Início', etc.). -> **COMPLETED**
7.  **user:** (Mensagem final da sessão anterior) Acesse como professora Ricleide e verifique... -> **COMPLETED**
8.  **user:** Em todas as páginas que tiver Voltar ao Dashboard, colocar o ícone de Home e a palavra Início... -> **COMPLETED**
9.  **user:** (Mensagem de confirmação) -> **COMPLETED**
10. **user:** Ok. Continue o desenvolvimento do sistema. -> **COMPLETED**

**Project Health Check:**
- **Broken:** None.
- **Mocked:** A funcionalidade de upload de imagens (perfil e capa) na página  está efetivamente mockada. Os botões existem na UI, mas não há um endpoint de backend para lidar com o upload de arquivos.

**3rd Party Integrations**
- None.

**Testing status**
- **Testing agent used after significant changes:** YES
- **Troubleshoot agent used after agent stuck in loop:** NO
- **Test files created:** None
- **Known regressions:** None

**Credentials to test flow:**
- **Admin:**  / 
- **Professor:**  / 

**What agent forgot to execute**
- O agente implementou a interface de usuário (UI) para upload de fotos de perfil e capa na página , mas esqueceu de implementar a lógica de backend necessária para receber, armazenar e associar esses arquivos ao perfil do usuário. A tarefa está incompleta sem essa parte crucial.</analysis>
